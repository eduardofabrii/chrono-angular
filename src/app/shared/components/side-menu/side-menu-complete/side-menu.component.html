<!-- Mobile Header -->
<div class="mobile-header">
  <div class="mobile-header-content">
    <div class="mobile-logo">
      <img src="../../../../assets/imgs/chrono-logo.png" alt="Chrono Logo" />
    </div>
    <button class="mobile-menu-toggle" (click)="toggleMenu()">
      <i class="pi" [ngClass]="isMobileMenuVisible ? 'pi-times' : 'pi-bars'"></i>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu" *ngIf="isMobileMenuVisible">
    <a class="mobile-menu-item" href="/dashboard">
      <i class="pi pi-home"></i>
      <span>Dashboard</span>
    </a>
    <a class="mobile-menu-item" href="/projects">
      <i class="pi pi-folder"></i>
      <span>Projetos</span>
    </a>
    <a class="mobile-menu-item" href="/hours">
      <i class="pi pi-history"></i>
      <span>Registro de Horas</span>
    </a>
    <a class="mobile-menu-item" (click)="openReleaseTimeDialog()">
      <i class="pi pi-clock"></i>
      <span>Lançar Horas</span>
    </a>
    <a class="mobile-menu-item" href="/reports">
      <i class="pi pi-chart-line"></i>
      <span>Relatórios</span>
    </a>
    <a class="mobile-menu-item" *ngIf="isAdmin" href="/register">
      <i class="pi pi-user-plus"></i>
      <span>Cadastro de Usuários</span>
    </a>
    <div class="mobile-menu-item">
      <i class="pi pi-user"></i>
      <span>{{ username }}</span>
    </div>
    <div class="mobile-menu-item" (click)="logout()" style="color: #f56565;">
      <i class="pi pi-sign-out"></i>
      <span>Sair</span>
    </div>
  </div>
</div>

<!-- Desktop Sidebar -->
<div class="side-menu-bar-full flex-container">
  <p-menu [ngClass]="'small-menu'" [style]="{ width: '60px' }">
    <ng-template pTemplate="start">
      <div class="sidebar" [class.collapsed]="isCollapsed">
        <!-- Ícone do Dashboard no topo -->
        <a class="p-button p-component-extra" title="Dashboard" href="/dashboard">
          <span class="p-button-icon-extra pi pi-home"></span>
        </a>

        <!-- Botão de alternância do menu -->
        <button class="p-button p-component" (click)="toggleMenu()">
          <span class="p-button-icon pi pi-bars"></span>
        </button>

        <!-- Ícone de Projetos na parte inferior -->
        <a class="p-button p-component-extra" title="Projetos" href="/projects">
          <span class="p-button-icon-extra pi pi-folder"></span>
        </a>
      </div>
    </ng-template>
  </p-menu>

  <p-menu *ngIf="isCollapsed" class="large-menu">
    <ng-template pTemplate="start">
      <div class="side-menu-bar-main flex flex-column h-full">
        <div class="flex align-items-center justify-content-center px-4 pt-3 flex-shrink-0">
            <span class="inline-flex align-items-center gap-2">
            <img src="../../../../assets/imgs/chrono-logo.png" alt="" class="mx-auto" style="width: 130px; cursor: pointer;" />
            </span>
        </div>
        <div class="overflow-y-auto flex-grow-1">
          <ul class="list-none p-3 m-0">
            <li>
              <div pRipple pStyleClass="@next" enterFromClass="hidden" enterActiveClass="slidedown" leaveToClass="hidden" leaveActiveClass="slideup" class="p-3 flex align-items-center justify-content-between text-600 cursor-pointer p-ripple">
                <span class="font-medium">Gerenciamento</span>
                <i class="pi pi-chevron-down"></i>
              </div>
              <ul class="list-none p-0 m-0 overflow-hidden">
                <li><a pRipple href="/dashboard" class="flex align-items-center cursor-pointer p-3 border-round text-700 hover:surface-100 transition-duration-150 transition-colors p-ripple"><i class="pi pi-home mr-2"></i><span class="font-medium">Dashboard</span></a></li>
                <li><a pRipple href="/projects" class="flex align-items-center cursor-pointer p-3 border-round text-700 hover:surface-100 transition-duration-150 transition-colors p-ripple"><i class="pi pi-folder mr-2"></i><span class="font-medium">Projetos</span></a></li>
                <li><a pRipple href="/hours" class="flex align-items-center cursor-pointer p-3 border-round text-700 hover:surface-100 transition-duration-150 transition-colors p-ripple"><i class="pi pi-history mr-2"></i><span class="font-medium">Registro de Horas</span></a></li>
                <li><a pRipple (click)="openReleaseTimeDialog()" class="flex align-items-center cursor-pointer p-3 border-round text-700 hover:surface-100 transition-duration-150 transition-colors p-ripple"><i class="pi pi-clock mr-2"></i><span class="font-medium">Lançar Horas</span></a></li>
                <li><a pRipple href="/reports" class="flex align-items-center cursor-pointer p-3 border-round text-700 hover:surface-100 transition-duration-150 transition-colors p-ripple"><i class="pi pi-chart-line mr-2"></i><span class="font-medium">Relatórios</span></a></li>
                <li *ngIf="isAdmin"><a pRipple href="/register" class="flex align-items-center cursor-pointer p-3 border-round text-700 hover:surface-100 transition-duration-150 transition-colors p-ripple"><i class="pi pi-user-plus mr-2"></i><span class="font-medium">Cadastro de Usuários</span></a></li>
              </ul>
            </li>
          </ul>
        </div>
        <div class="mt-auto"></div>
        <hr class="mb-3 mx-3 border-top-1 border-none surface-border" />
        <a pRipple class="m-3 flex align-items-center justify-content-center cursor-pointer p-3 gap-2 border-round text-700 hover:surface-100 transition-duration-150 transition-colors p-ripple">
          <span class="font-bold">{{ username }}</span>
        </a>
        <button class="m-3 btn-logout" (click)="logout()">
          <i class="pi pi-sign-out"></i>
          <span class="font-medium">Sair</span>
        </button>
      </div>
    </ng-template>
  </p-menu>
</div>

<app-release-time></app-release-time>
