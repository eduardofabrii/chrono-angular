<!-- Toolbar -->
<p-toolbar>
  <div class="p-toolbar-group-start" style="display: flex; align-items: center;">
    <i class="pi pi-home" style="font-size: 1.2rem;"></i>
    <span style="font-weight: bold; font-size: 1.2rem;">
      Dashboard
    </span>
  </div>

  <div class="p-toolbar-group-center">

  </div>

  <div class="flex p-toolbar-group-end">
    <p-button icon="pi pi-refresh" styleClass="p-button-text" (onClick)="refreshData()" [loading]="isLoading"></p-button>
  </div>
</p-toolbar>

<!-- Dashboard -->
<div>
  <div class="grid mt-3">
    <div class="col-12 md:col-6 lg:col-3">
      <div class="summary-card bg-blue-50">
        <div class="card-content">
          <span class="title">Total de Projetos</span>
          <span class="value">{{totalProjects}}</span>
        </div>
        <i class="pi pi-briefcase icon blue-icon"></i>
      </div>
    </div>

    <div class="col-12 md:col-6 lg:col-3">
      <div class="summary-card bg-green-50">
        <div class="card-content">
          <span class="title">Projetos Ativos</span>
          <span class="value">{{ activeProjects }}</span>
        </div>
        <i class="pi pi-bolt icon green-icon"></i>
      </div>
    </div>

    <div class="col-12 md:col-6 lg:col-3">
      <div class="summary-card bg-yellow-50">
        <div class="card-content">
          <span class="title">Total de Atividades</span>
          <span class="value">{{ totalActivities }}</span>
        </div>
        <i class="pi pi-calendar icon yellow-icon"></i>
      </div>
    </div>

    <div class="col-12 md:col-6 lg:col-3">
      <div class="summary-card bg-purple-50">
        <div class="card-content">
          <span class="title">Horas Totais</span>
          <span class="value">{{ totalHours }}</span>
        </div>
        <i class="pi pi-clock icon purple-icon"></i>
      </div>
    </div>
  </div>

  <!-- Projeto Status -->
  <div class="grid">
    <div class="col-12 md:col-6 lg:col-6">
      <p-card header="Status dos Projetos" styleClass="chart-card text-center">
        <div class="chart-container">
          <div class="percentage-container">
            <div class="percentage-value">{{ projectInProgressPercentage }}%</div>
            <div class="percentage-label">Em andamento</div>
          </div>
          <p-chart type="doughnut" [data]="projectStatusData" [options]="chartOptions"></p-chart>
        </div>
      </p-card>
    </div>

    <!-- TODO: Pensando o que por... -->
    <div class="col-12 md:col-6 lg:col-6">
      <p-card header="Pensando" styleClass="chart-card text-center">
        <div class="chart-container">
          <p-chart [options]="chartOptions"></p-chart>
        </div>
      </p-card>
    </div>

    <!-- Horas por projeto -->
    <div class="col-12 lg:col-6">
      <p-card header="Horas por Projeto" styleClass="chart-card">
        <div class="projects-hours-container">
          <div *ngFor="let project of topProjects" class="project-item">
            <div class="project-info">
              <div class="project-name">{{project.name}}</div>
              <div class="project-hours">{{project.hours}}h</div>
            </div>
            <p-progressBar [value]="getProjectHoursPercentage(project.hours)" [showValue]="false"></p-progressBar>
            <p-tag [value]="getProjectStatus(project.status)" [severity]="getProjectSeverity(project.status)" [style]="{ 'margin-top': '5px' }"></p-tag>
          </div>
        </div>
      </p-card>
    </div>

    <!-- Horas por usuário -->
    <div class="col-12 lg:col-6">
      <p-card header="Horas por Usuário" styleClass="chart-card">
        <div class="user-hours-container">
          <div *ngFor="let user of topUsers" class="user-item">
            <div class="user-avatar" [style.background-color]="user.color">
              {{user.initials}}
            </div>
            <div class="user-info">
              <div class="user-name">{{user.name}}</div>
              <p-progressBar [value]="getUserHoursPercentage(user.hours)" [showValue]="false"></p-progressBar>
              <div class="user-hours">{{user.hours}}h</div>
            </div>
          </div>
        </div>
      </p-card>
    </div>
  </div>
</div>

<!-- Toast para notifcações -->
<p-toast></p-toast>
